<html>
<head>
  <title>Testing R tree and Gmaps clustering: Innoto</title>
</head>
<body>
  <h1>R Tree clustering test</h1>
  <div id="mapa" style="background-color:grey;width:100%;height:600px;"></div>
  <div> GMAP Canvas load: <span id="gmap_load"></span> ms</div>
  <div> JSON Load: <span id="carga_json"></span> ms</div>
  <div> R Tree creation by levels: <span id="carga_arbol"></span> ms</div>
  <div> Clustering proccess raw: <span id="procesado_clusters"></span> ms</div>
  <div> Aply filters and remove dupes: <span id="aplicar_filtros"></span> ms</div>
  <div> Load on gmaps: <span id="carga_sobre_gmaps"></span> ms</div><br>
  <div> <b>Total time: <span id="tiempo_total"></span> ms</b></div>

  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.js"></script>
  <script type="text/javascript" src="marker_clusterer_lite/marker_clusterer_lite.js"></script>
  <script type="text/javascript">

      var json_data = false;
      var mapa = false;



      $(document).ready(function() {



        // gmaps init
        load_gmap();

          // load json
        carga_json= new time_calc();
        load_json();


        cluster_manager =  new MarkerClusterer_v3({
          map: mapa,
          json_data: json_data,
          zoom_range : [12,20],
          //cluster_radious: 10
        })



      });

      function load_json() {
        $.ajax({
          url: 'points.json',
          type: 'get',
          cache: false,
          success: function(data) { 
            json_data = data;
          },
          async:false,
        });
      }

      function load_gmap() {
        var mapOptions = {
          zoom: 12,
          center: new google.maps.LatLng(
            51.511688,
            -0.185094
          )
        };
        mapa = new google.maps.Map(document.getElementById('mapa'),
            mapOptions);
      }







      function time_calc() {

        this.getdate= function() {
          return new Date().getTime() ;
        }

        this.check = function() {
          return  this.getdate() - this.started_at;
        }

        this.started_at = false;
        this.started_at =  this.getdate()
      }


  </script>
</body>
</html>